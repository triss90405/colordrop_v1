<?php include('inc/header.php'); ?>

  <?php include('inc/navigation.php'); ?>

  <section class="content">

    <?php

    $db = new SQLite3('colors.db');
    $ids = $_COOKIE["colors"];

    if (!isset($ids)) {
      echo "<a class='add_favourites' href='/'>+ Add colors now</a>";
    }

    $colors = $db->query('SELECT * FROM colors ORDER BY id DESC');

    while ($color = $colors->fetchArray()) {

      $color_ids = explode(" ", $_COOKIE['colors']);

      foreach ($color_ids as $color_id) {

        if ($color_id == $color['id']) {

          $result = explode(" ", $color['hex']);

          echo '<div class="palette">';
          foreach($result as $hex) {
            echo '<div class="color" style="background-color:#'.$hex.'"></div>';
          }
          echo '
          </div>
          <div class="palette__details">
            <div class="top">

            <form method="post" action="/favourite_delete_post.php">
              <button name="id" value="'.$color['id'].'" class="sidebar__favourite--remove">
                <svg baseProfile="tiny" height="24px" id="Layer_1" version="1.2" viewBox="0 0 24 24" width="24px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <path d="M9.362,9.158c0,0-3.16,0.35-5.268,0.584c-0.19,0.023-0.358,0.15-0.421,0.343s0,0.394,0.14,0.521    c1.566,1.429,3.919,3.569,3.919,3.569c-0.002,0-0.646,3.113-1.074,5.19c-0.036,0.188,0.032,0.387,0.196,0.506    c0.163,0.119,0.373,0.121,0.538,0.028c1.844-1.048,4.606-2.624,4.606-2.624s2.763,1.576,4.604,2.625    c0.168,0.092,0.378,0.09,0.541-0.029c0.164-0.119,0.232-0.318,0.195-0.505c-0.428-2.078-1.071-5.191-1.071-5.191    s2.353-2.14,3.919-3.566c0.14-0.131,0.202-0.332,0.14-0.524s-0.23-0.319-0.42-0.341c-2.108-0.236-5.269-0.586-5.269-0.586    s-1.31-2.898-2.183-4.83c-0.082-0.173-0.254-0.294-0.456-0.294s-0.375,0.122-0.453,0.294C10.671,6.26,9.362,9.158,9.362,9.158z"/>
                </svg>
                <strong>Remove</strong>
              </button>
            </form>

              <span class="sidebar__close">
              <svg enable-background="new 0 0 32 32" height="32px" id="close" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path d="M17.459,16.014l8.239-8.194c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.391-1.034-0.391-1.428,0  l-8.232,8.187L7.73,6.284c-0.394-0.395-1.034-0.395-1.428,0c-0.394,0.396-0.394,1.037,0,1.432l8.302,8.303l-8.332,8.286  c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.428,0l8.325-8.279l8.275,8.276c0.394,0.395,1.034,0.395,1.428,0  c0.394-0.396,0.394-1.037,0-1.432L17.459,16.014z" fill="#121313" id="Close"/>
              </svg>
              </span>
            </div>';

          foreach($result as $hex) {

            list($r, $g, $b) = sscanf($hex, "%02x%02x%02x");
            $rgb = "$r $g $b";

            echo '
            <div class="color1">
              <div class="color" style="background:#'.$hex.'"></div>
              <p class="hex">HEX: <span class="hexcode">#'.$hex.'</span></p>
              <p class="rgb">RGB: <span>'.$rgb.'</span></p>
            </div>
            ';
          }
          echo '<hr><a href="download.php?colors=';
          foreach($result as $hex) {
            echo $hex . ',';
          }
          echo '"class="button">Download palette</a>';
          echo '</div>';

        }

      }

    }

    ?>

  </section><!-- end .content -->

  <?php include('inc/dialog.php'); ?>

  <?php include('inc/footer.php'); ?>
